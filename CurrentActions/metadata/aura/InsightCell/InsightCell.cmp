<aura:component controller="InsightsController">

<ltng:require styles="/resource/SLDS100/assets/styles/salesforce-lightning-design-system-ltng.css" scripts="/resource/DataTables/datatables.js,/resource/Chartjs,/resource/moment,/resource/underscore" afterScriptsLoaded="{!c.postScript}"/>

<aura:handler name="init" value="{!this}" action="{!c.doInit}" />

<aura:attribute name="insight" type="Insight__c" />
<aura:registerEvent name="selected_insight" type="c:selectInsight"/>

<aura:attribute name="icon" type="String" />
<aura:attribute name="icon_class" type="String" />

<aura:attribute name="index" type="String" />
<aura:attribute name="unread" type="Boolean" />

<aura:attribute name="fullinit" type="Boolean" default='false'/>


<div class="slds" style="background-color:white">


<div class="cell-table slds-p-around--large">

  <div class="cell-title" >
  <div class="cell-title-text pink">Source: Opportunitiy </div>
  <div class="cell-title-text">{!v.insight.Long_Name__c}</div>
  </div>

  <div class="cell-data">
   <a class="cell-data-text" target="_blank" href="{!'https://rowan-dev-ed.my.salesforce.com/'+v.insight.Id}"><ui:outputDateTime value="{!v.insight.LastModifiedDate}" format="EEE, h:mm a"/></a>
   <div class="count-badge">
   4
   </div>
 </div>

 </div> <!-- table -->


 <div class="slds-p-left--large">
 <hr class="cell-divider" />
 </div>


<div class="slds-p-around--large">
<aura:unescapedHtml value="{!v.insight.Details__c}"/>
</div>


<div class="slds-p-around--large">
  <canvas id="{!'chart-'+v.index}" width="500" height="150"></canvas>
</div>

<div class="slds-p-around--large">
<aura:unescapedHtml value="{!v.insight.Long_Name__c}"/>
</div>

</div>


</aura:component>

<!--     <div class="dropdown-float ">
      <div class="slds-dropdown-trigger">
        <button class="slds-button slds-button-GGG-icon-border-filled" aria-haspopup="true">
          <c:svg class="slds-button__icon slds-button__icon-GGG-hint" xlinkHref="/resource/SLDS100/assets/icons/utility-sprite/svg/symbols.svg#down" />
          <span class="slds-assistive-text">Show More</span>
        </button>
        <div class="slds-dropdown slds-dropdown-GGG-right slds-dropdown-GGG-menu">
          <ul class="slds-dropdown__list" role="menu">
            <li id="menu-0-0" class="slds-dropdown__item">
              <a href="javascript:void(0)" role="menuitem" onclick="{!c.openObject}">Go To</a>
            </li>
            <li id="menu-1-1" class="slds-dropdown__item">
              <a href="javascript:void(0)" role="menuitem" onclick="{!c.sendSelectedInsight}">Detail</a>
            </li>
            <li id="menu-2-2" class="slds-dropdown__item">
              <a href="{!'omnifocus:///add?name=' + v.insight.Long_Name__c}" role="menuitem">Add to OmniFocus</a>
            </li>
          </ul>

        </div>
      </div>
    </div> -->