<aura:component controller="InsightsController">

<aura:handler name="init" value="{!this}" action="{!c.doInit}" />

<aura:attribute name="insight" type="Insight__c" />
<aura:registerEvent name="selected_insight" type="c:selectInsight"/>

<aura:attribute name="icon" type="String" />
<aura:attribute name="icon_class" type="String" />


<aura:attribute name="accounts" type="SObject[]" />
<aura:attribute name="rows" type="List" />

<div class="slds">
<div class="center slds-p-top--xx-large slds-p-bottom--xx-large" style="width:75%">


  <div class="dropdown-float ">
    <div class="slds-dropdown-trigger">
      <button class="slds-button slds-button--icon-border-filled" aria-haspopup="true">
        <c:svg class="slds-button__icon slds-button__icon--hint" xlinkHref="/resource/SLDS0122/assets/icons/utility-sprite/svg/symbols.svg#down" />
        <span class="slds-assistive-text">Show More</span>
      </button>
      <div class="slds-dropdown slds-dropdown--right slds-dropdown--menu">
        <ul class="slds-dropdown__list" role="menu">
          <li id="menu-0-0" class="slds-dropdown__item">
            <a href="javascript:void(0)" role="menuitem" onclick="{!c.openObject}">Go To</a>
          </li>
          <li id="menu-1-1" class="slds-dropdown__item">
            <a href="javascript:void(0)" role="menuitem" onclick="{!c.sendSelectedInsight}">Detail</a>
          </li>
          <li id="menu-2-2" class="slds-dropdown__item">
            <a href="{!'omnifocus:///add?name=' + v.insight.Long_Name__c}" role="menuitem">Add to OmniFocus</a>
          </li>
        </ul>

      </div>
    </div>
  </div>

  <div class="slds-media slds-comment slds-hint-parent slds-p-bottom--large">
    <div class="slds-media__figure">

      <span class="{!'slds-icon__container '+ v.icon_class}">
        <c:svg class="slds-icon" xlinkHref="{!'/resource/SLDS0122/assets/icons/'+ v.icon}" />
        <span class="slds-assistive-text">Icon</span>
      </span>

    </div>
    <div class="slds-media__body">
      <div class="slds-grid slds-grid--align-spread">
        <div class="slds-text-longform slds-text-body--regular"><aura:unescapedHtml value="{!v.insight.Name}"/></div>
      </div>

      <aura:unescapedHtml value="{!v.insight.Parents__c}"/>

      <div class="slds-text-body--small" style="color:#8E99A6" >
        <ul class="slds-list--horizontal slds-has-dividers--right slds-has-inline-block-links">
         <li class="slds-list__item" >
           generated on: <ui:outputDateTime value="{!v.insight.LastModifiedDate}" format="EEE, h:mm a"/>
         </li>
         <li class="slds-list__item" >
          generated using report: <a href="{!'https://rowan-dev-ed.my.salesforce.com/'+v.insight.ReportID__c}">{!v.insight.Data_Source__c}</a>
        </li>
        <li class="slds-list__item" >
          <a href="{!'https://rowan-dev-ed.my.salesforce.com/'+v.insight.Id}">direct link</a>
        </li>

      </ul>
    </div>

  </div>
</div>

<div class="slds-comment__content slds-text-longform slds-text-body--regular slds-p-top--medium slds-p-bottom--xx-large">
 {!v.insight.Long_Name__c}
</div>

<button class="slds-button slds-button--neutral slds-button--brand" onclick="{!c.showModal}">See Details</button>

</div>


</div>
</aura:component>